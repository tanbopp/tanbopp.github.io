<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Project Detail</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-4">Debug Project Detail Page</h1>
        
        <div id="debug-info" class="mb-8 p-4 bg-gray-800 rounded">
            <h2 class="text-xl mb-2">Debug Information:</h2>
            <div id="debug-output"></div>
        </div>
        
        <div id="project-content">
            <h2 id="project-title" class="text-2xl font-bold mb-4">Loading...</h2>
            <p id="project-description" class="mb-4">Loading project details...</p>
            
            <div id="project-info" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                <div>
                    <strong>Category:</strong> <span id="project-category">-</span>
                </div>
                <div>
                    <strong>Work For:</strong> <span id="project-workfor">-</span>
                </div>
                <div>
                    <strong>Platform:</strong> <span id="project-platform">-</span>
                </div>
                <div>
                    <strong>Year:</strong> <span id="project-year">-</span>
                </div>
            </div>
            
            <div id="gallery-section" class="mb-8">
                <h3 class="text-xl font-bold mb-4">Gallery</h3>
                <div id="gallery-images" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Gallery images will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Load project data -->
    <script src="projects/data.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const debugOutput = document.getElementById('debug-output');
            
            // Debug logging
            function log(message) {
                console.log(message);
                debugOutput.innerHTML += `<p>${message}</p>`;
            }
            
            log('üîÑ Starting debug...');
            
            // Check if data is loaded
            log(`üìä window.projectsData exists: ${!!window.projectsData}`);
            log(`üìä Data type: ${typeof window.projectsData}`);
            
            if (window.projectsData) {
                log(`üìä Projects count: ${window.projectsData.length}`);
                window.projectsData.forEach((project, index) => {
                    log(`üìä Project ${index + 1}: ${project.id} - ${project.title}`);
                });
            }
            
            // Get URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const projectId = urlParams.get('id');
            
            log(`üîç Project ID from URL: ${projectId}`);
            
            if (!projectId) {
                log('‚ùå No project ID in URL');
                document.getElementById('project-title').textContent = 'No Project ID';
                document.getElementById('project-description').textContent = 'Please add ?id=project-id to the URL';
                return;
            }
            
            if (!window.projectsData) {
                log('‚ùå Project data not loaded');
                document.getElementById('project-title').textContent = 'Data Not Loaded';
                document.getElementById('project-description').textContent = 'Failed to load project data';
                return;
            }
            
            // Find project
            const project = window.projectsData.find(app => app.id === projectId);
            
            log(`üéØ Project found: ${!!project}`);
            
            if (!project) {
                log(`‚ùå Project with ID "${projectId}" not found`);
                document.getElementById('project-title').textContent = 'Project Not Found';
                document.getElementById('project-description').textContent = `Project "${projectId}" not found`;
                return;
            }
            
            log(`‚úÖ Loading project: ${project.title}`);
            
            // Populate project data
            document.getElementById('project-title').textContent = project.title;
            document.getElementById('project-description').textContent = project.description;
            document.getElementById('project-category').textContent = project.category || 'N/A';
            document.getElementById('project-workfor').textContent = project.workFor || 'N/A';
            document.getElementById('project-platform').textContent = Array.isArray(project.platform) ? project.platform.join(', ') : project.platform || 'N/A';
            document.getElementById('project-year').textContent = project.year || 'N/A';
            
            // Load gallery
            if (project.gallery && project.gallery.length > 0) {
                const galleryContainer = document.getElementById('gallery-images');
                galleryContainer.innerHTML = project.gallery.map(imageUrl => 
                    `<img src="${imageUrl}" alt="Project image" class="w-full h-48 object-cover rounded">`
                ).join('');
                log(`üñºÔ∏è Loaded ${project.gallery.length} gallery images`);
            } else {
                log('üì∑ No gallery images found');
                document.getElementById('gallery-section').style.display = 'none';
            }
            
            log('‚úÖ Debug complete!');
        });
    </script>
</body>
</html>
